<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ceol Gan Eagla ‚Äî Weather</title>

<!-- PWA + icons -->
<link rel="manifest" href="manifest.webmanifest?v=9">
<link rel="icon" href="favicon.ico">
<link rel="apple-touch-icon" href="icon-192.png">
<meta name="theme-color" content="#0b1220"/>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
/* keep styles same as before */
:root{--bg:#0b1220;--panel:#12141c;--card:#1a1e29;--text:#eaeaea;--muted:#b9b9c2}
*{box-sizing:border-box} html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:14px/1.35 system-ui,Segoe UI,Roboto,Arial}
.app{display:grid;grid-template-columns:1fr 420px;gap:12px;height:100vh;padding:12px}
#map{width:100%;height:100%;border-radius:16px;overflow:hidden}
aside{background:var(--panel);border-radius:16px;overflow:auto;padding:12px}
.brand{display:flex;gap:10px;align-items:center;margin-bottom:10px}
.logo{width:40px;height:40px;border-radius:10px;overflow:hidden;background:#000}
.logo img{width:100%;height:100%;object-fit:cover}
h1{font-size:18px;margin:0} .sub{color:var(--muted);font-size:12px}
.card{background:var(--card);border-radius:12px;padding:12px;margin-bottom:10px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.btn{border:0;padding:8px 10px;border-radius:10px;background:#fff;color:#111;cursor:pointer;font-weight:600}
.btn.ghost{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.2)}
input[type=range]{width:160px}
#hourly{display:flex;gap:8px;overflow-x:auto;padding-bottom:6px}
.hour{min-width:84px;padding:8px;border-radius:10px;background:rgba(255,255,255,.06);text-align:center}
.hour .ico{width:26px;height:26px;margin:4px auto}
#daily{display:grid;grid-template-columns:repeat(7,minmax(78px,1fr));gap:8px}
.day{padding:8px;border-radius:10px;background:rgba(255,255,255,.06);text-align:center}
.day .ico{width:26px;height:26px;margin:4px auto}
#search{width:100%;border:1px solid rgba(255,255,255,.2);border-radius:10px;padding:10px 12px;background:#0f131c;color:var(--text)}
#suggest{margin-top:6px;border:1px solid rgba(255,255,255,.15);border-radius:10px;overflow:hidden;display:none;max-height:220px;overflow:auto}
.item{padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.08);cursor:pointer}
.item:hover{background:rgba(255,255,255,.06)}
.chip{padding:6px 8px;border-radius:10px;background:rgba(255,255,255,.06);font-size:12px}
.map-info{background:rgba(18,18,22,.88);color:#fff;border:1px solid rgba(255,255,255,.2);padding:6px 8px;border-radius:8px;font-size:12px}
.map-info .line{opacity:.8}
@media (max-width:860px){.app{grid-template-columns:1fr;grid-template-rows:50vh 1fr}}
</style>
</head>
<body>
<div class="app">
  <div id="map"></div>
  <aside>
    <div class="brand">
      <div class="logo">
        <img src="./logo.png?v=9" alt="Ceol Gan Eagla Logo"
             onerror="this.onerror=null;this.src='./icon-192.png?v=9'">
      </div>
      <div>
        <h1>Ceol Gan Eagla ‚Äî Weather</h1>
        <div class="sub">Sources: OSM ‚Ä¢ MapTiler ‚Ä¢ RainViewer ‚Ä¢ Open-Meteo ‚Ä¢ Nominatim</div>
      </div>
    </div>

    <!-- controls and forecast panels same as previous version -->
    <div class="card">
      <input id="search" placeholder="Search place or Eircode‚Ä¶"/>
      <div id="suggest"></div>
    </div>

    <div class="card">
      <div class="row">
        <button id="btnGeo" class="btn">üìç Me</button>
        <button id="btnPin"  class="btn ghost">üìå Pin</button>
        <label>Units
          <select id="units" class="btn ghost">
            <option value="metric" selected>Metric (¬∞C)</option>
            <option value="imperial">Imperial (¬∞F)</option>
          </select>
        </label>
        <label>Map
          <select id="style" class="btn ghost">
            <option value="streets" selected>Streets</option>
            <option value="satellite">Satellite</option>
            <option value="outdoor">Outdoor</option>
          </select>
        </label>
      </div>
      <div class="row" style="margin-top:8px">
        <button id="play" class="btn ghost">‚ñ∂Ô∏é</button>
        <input id="frame" type="range" min="0" max="0" step="1" value="0"/>
        <span id="frametime" class="sub">‚Äî</span>
      </div>
    </div>

    <div class="card">
      <div class="row">
        <button id="toggleRadar" class="btn">Radar On</button>
        <button id="toggleClouds" class="btn ghost" disabled>Clouds N/A</button>
        <label>Opacity <input id="opacity" type="range" min="0" max="1" step="0.05" value="0.7"/></label>
        <button id="refresh" class="btn ghost">‚Üª Refresh</button>
      </div>
    </div>

    <div class="card">
      <div class="row">
        <div id="nowIcon"></div>
        <div class="chip" id="temp">‚Äî</div>
        <div class="chip" id="wind">Wind ‚Äî</div>
        <div class="chip" id="precip">Precip ‚Äî</div>
        <div class="chip" id="cloud">Cloud ‚Äî</div>
        <div class="chip" id="sun">Sunrise ‚Äî / Sunset ‚Äî</div>
        <div class="chip" id="risk">‚Äî</div>
        <div class="chip" id="updated">‚Äî</div>
      </div>
    </div>

    <div class="card">
      <div class="sub" style="margin-bottom:6px">Next 24 hours</div>
      <div id="hourly">Loading‚Ä¶</div>
    </div>
    <div class="card">
      <div class="sub" style="margin-bottom:6px">7-day forecast</div>
      <div id="daily">Loading‚Ä¶</div>
    </div>
  </aside>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const Info=L.Control.extend({onAdd:function(){const d=L.DomUtil.create('div','map-info');d.innerHTML='<div id="infoplace">Locating‚Ä¶</div><div class="line" id="infocoord">‚Äî</div><div class="line" id="infotemp">‚Äî</div>';return d;}});
const map=L.map('map').setView([53.35,-6.26],7);
map.addControl(new Info({position:'topleft'}));
const infoplace=document.getElementById('infoplace'),infocoord=document.getElementById('infocoord'),infotemp=document.getElementById('infotemp');

// MapTiler key (your provided one)
const MT='MpDV384cXMNO273WsuTG';
const styles={
  streets:`https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key=${MT}`,
  satellite:`https://api.maptiler.com/maps/satellite/{z}/{x}/{y}.jpg?key=${MT}`,
  outdoor:`https://api.maptiler.com/maps/outdoor-v2/{z}/{x}/{y}.png?key=${MT}`
};
let base=L.tileLayer(styles.streets,{attribution:'&copy; OSM ‚Ä¢ MapTiler'}).addTo(map);

// ... (rest of the JS is exactly same as the previous full version I sent ‚Äî forecast, radar, icons, search, events, etc.)
</script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js?v=9').catch(()=>{});
  });
}
</script>
</body>
</html>
